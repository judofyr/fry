#!/usr/bin/env ruby
require_relative '../c1/compiler'
require_relative '../c1/grammar'

c = Compiler.new
filename = File.expand_path(ARGV.fetch(0))
main_file = c.file(filename)
c.process_files

mainfn = main_file.scope["main"].compile_expr

puts c.backend

